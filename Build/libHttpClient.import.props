<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Import Condition="'$(LibHttpClientImported)' == 'true'" Project="Error attempting to import LibHttpClient twice. Condition all imports on ('ProjectName'Imported) != true." />
  <PropertyGroup>
    <LibHttpClientImported>true</LibHttpClientImported>
  </PropertyGroup>

  <Import Condition="'$(PlayFabPathsImported)' != 'true'" Project="PlayFab.C.paths.props" />
  <Import Condition="'$(HCPlatform)' == ''" Project="$(HCRoot)\platform_select.props" />

  <PropertyGroup>
    <HCProjectName Condition="'$(HCPlatform)' == 'Win32'">libHttpClient.Win32</HCProjectName>
    <HCProjectName Condition="'$(HCPlatform)' == 'GDK'">libHttpClient.143.GDK.C</HCProjectName>
    <HCOutDir>$(PlayFabOutRoot)\$(Platform)\$(Configuration)\$(HCProjectName)\</HCOutDir>
  </PropertyGroup>
  
  <!--Bring in LHC project files from PlayFab repo. We are maintaining duplicates of LHC vcxproj files for the build configurations that we need so that we-->
  <!--can include them in the PlayFab.C sln. The project files in the LHC repo aren't at a fixed location, and Visual Studio doesn't support including-->
  <!--projects with variable paths in an sln.-->
  <ItemGroup Condition="'$(HCPlatform)' == 'Win32' Or '$(HCPlatform)' == 'GDK'">
    <ProjectReference Include="$(PlayFabBuildRoot)\$(HCProjectName)\$(HCProjectName).vcxproj">
      <Project Condition="'$(HCPlatform)' == 'Win32'">{E35BA8A1-AE7B-4FB5-8200-469B98BC1CA8}</Project>
      <Project Condition="'$(HCPlatform)' == 'GDK'">{FD35375E-DCEA-4BF5-874E-5C2733DAB50E}</Project>
    </ProjectReference>
  </ItemGroup>

  <ItemDefinitionGroup>
    <ClCompile>
      <AdditionalIncludeDirectories>%(AdditionalIncludeDirectories);$(HCIncludeDir)</AdditionalIncludeDirectories>
    </ClCompile>
    <Link>
      <AdditionalDependencies Condition="'$(HCPlatform)'=='GDK'">%(AdditionalDependencies);Appnotify.lib;winhttp.lib;crypt32.lib</AdditionalDependencies>
    </Link>
  </ItemDefinitionGroup>

  <!--Bring in XCurl on GDK-->
  <ImportGroup Condition="'$(HCPlatform)' == 'GDK' AND '$(GameDK)' != ''">
    <Import Project="$(GameDK)\$(XdkEditionTarget)\GRDK\ExtensionLibraries\Xbox.XCurl.API\DesignTime\CommonConfiguration\neutral\ExtensionLibrary.props"/>
  </ImportGroup>
  <ItemDefinitionGroup>
    <Link>
      <AdditionalLibraryDirectories>%(AdditionalLibraryDirectories);$(Console_SdkLibPath)</AdditionalLibraryDirectories>
    </Link>
  </ItemDefinitionGroup>

  <!--Copy PlayFabCore to OutDir-->
  <ItemGroup Condition="'$(HCPlatform)' == 'Win32'" Label="CopyDependencies">
    <ReferenceCopyLocalPaths Include="$(HCOutDir)\*" />
  </ItemGroup>

</Project>
